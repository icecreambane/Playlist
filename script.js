// Playlist dictionary


const playlist = {
    "Booraye - Ian Clarke": ["booraye_ian_clarke","rgb(120 86 65)",["Instrumental"]],
    "After the Fall - Two Steps From Hell": ["After_the_Fall_Two_Steps_From_Hell","rgb(225 113 49)",["Instrumental","Epic","TSFH"]],
    "Archangel - Two Steps From Hell": ["Archangel_Two_Steps_From_Hell","rgb(67 53 48)",["Instrumental","Epic","TSFH"]],
    "Birth of a Hero - Two Steps From Hell": ["Birth_of_a_Hero_Two_Steps_From_Hell","rgb(102 96 75)",["Instrumental","Epic","TSFH"]],
    "Blackheart - Two Steps From Hell": ["Blackheart_Two_Steps_From_Hell","rgb(115 132 134)",["Instrumental","Epic","TSFH"]],
    "Black Blade - Two Steps From Hell": ["black_blade","rgb(26 94 126)",["Instrumental","Epic","TSFH"]],
    "Breathe - Two Steps From Hell":["breathe","rgb(128 180 223)",["Instrumental","Epic","TSFH"]],
    "Colors of Love - Two Steps From Hell": ["Colors_of_Love_Two_Steps_From_Hell","rgb(206 142 105)",["Instrumental","Epic","TSFH"]],
    "Compass - Two Steps From Hell": ["Compass_Two_Steps_From_Hell","rgb(201 132 87)",["Instrumental","Epic","TSFH"]],
    "El Dorado - Two Steps From Hell": ["El_Dorado_Two_Steps_From_Hell","rgb(192 149 106)",["Instrumental","Epic","TSFH"]],
    "Empire of Angels - Two Steps From Hell": ["Empire_of_Angels_Two_Steps_From_Hell","rgb(97 151 162)",["Instrumental","Epic","TSFH"]],
    "Flight of the Silverbird - Two Steps From Hell": ["Flight_of_the_Silverbird_Two_Steps_From_Hell","rgb(122 137 143)",["Instrumental","Epic","TSFH"]],
    "For the Win - Two Steps From Hell": ["For_the_Win_Two_Steps_From_Hell","rgb(188 210 210)",["Instrumental","Epic","TSFH"]],
    "Freedom Fighters - Two Steps From Hell": ["Freedom_Fighters_Two_Steps_From_Hell","rgb(224 219 208)",["Instrumental","Epic","TSFH"]],
    "Immortal - Two Steps From Hell": ["Immortal_Two_Steps_From_Hell","rgb(235 201 180)",["Instrumental","Epic","TSFH"]],
    "Impossible - Two Steps From Hell": ["Impossible_Two_Steps_From_Hell","rgb(47 70 68)",["Instrumental","Epic","TSFH"]],
    "Invincible - Two Steps From Hell": ["invincible_tsfh","rgb(52 183 244)",["Instrumental","Epic","TSFH"]],
    "Love & Loss - Two Steps From Hell":["loveloss_tsfh","rgb(100 159 189)",["Instrumental","Epic","TSFH"]],
    "Magika - Two Steps From Hell": ["magika","rgb(0 184 226)",["Instrumental","Epic","TSFH"]],
    "Never Back Down - Two Steps From Hell": ["Never_Back_Down_Two_Steps_From_Hell","rgb(158 129 122)",["Instrumental","Epic","TSFH"]],
    "Pegasus - Two Steps From Hell": ["Pegasus_Two_Steps_From_Hell","rgb(53 105 111)",["Instrumental","Epic","TSFH"]],
    "Protectors of the Earth - Two Steps From Hell": ["Protectors_of_the_Earth_Two_Steps_From_Hell","rgb(205 158 118)",["Instrumental","Epic","TSFH"]],
    "Secret Melody - Two Steps From Hell": ["secret_melody_tsfh","rgb(165 140 124)",["Instrumental","Epic","TSFH"]],
    "Stallion - Two Steps From Hell": ["Stallion_Two_Steps_From_Hell","rgb(214 167 142)",["Instrumental","Epic","TSFH"]],
    "Starfall - Two Steps From Hell": ["Starfall_Two_Steps_From_Hell","rgb(221 176 195)",["Instrumental","Epic","TSFH"]],
    "Star Sky - Two Steps From Hell": ["Star_Sky_Two_Steps_From_Hell","rgb(113 155 158)",["Instrumental","Epic","TSFH"]], // need to do this next
    "Strength of a Thousand Men - Two Steps From Hell": ["Strength_of_a_Thousand_Men_Two_Steps_From_Hell","rgb(194 171 154)",["Instrumental","Epic","TSFH"]],
    "To Glory - Two Steps From Hell": ["To_Glory_Two_Steps_From_Hell","rgb(198 166 152)",["Instrumental","Epic","TSFH"]],
    "Unleashed - Two Steps From Hell": ["unleashed_tsfh","rgb(131 190 213)",["Instrumental","Epic","TSFH"]],
    "Victory - Two Steps From Hell": ["Victory_Two_Steps_From_Hell","rgb(170 135 104)",["Instrumental","Epic","TSFH"]],
    "Winterspell - Two Steps From Hell": ["winterspell_tsfh","rgb(41 173 220)",["Instrumental","Epic","TSFH"]],
    "Victory X Heart of Courage - Remix": ["Victory_X_Heart_of_Courage","rgb(129 128 179)",["Instrumental","Epic","Remix","TSFH"]],
    "Children of the Sun - Thomas Bergersen": ["Children_of_the_Sun","rgb(224 153 50)",["Instrumental","Epic"]],
    "Final Frontier - Thomas Bergersen": ["Final_Frontier_Thomas_Bergersen","rgb(194 102 97)",["Instrumental","Epic"]],
    "Rada - Thomas Bergersen":["Rada","rgb(228 178 117)",["Instrumental","Epic"]],
    "Rohan Theme - Lord of the Rings (LOTR)": ["Rohan_Theme_LOTR","rgb(145 157 158)",["Instrumental","Epic", "Theme/OST"]],
    "Rohan Rohirrim Soundtrack - LOTR": ["Rohan_Rohirrim_Soundtrack_LOTR","rgb(121 126 63)",["Instrumental","Epic","Theme/OST"]],
    "Unravel Remix - Tokyo Ghoul (Samuel Kim)": ["Unravel_Tokyo_Ghoul","rgb(227 196 237)",["Instrumental","Epic","Theme/OST"],"Japanese"],
    "Kai's Theme - Kung Fu Panda (Samuel Kim)": ["Kai_Theme_Kung_Fu_Panda","rgb(2 232 154)",["Instrumental","Epic","Theme/OST"]],
    "Rengoku Theme - Demon Slayer (Samuel Kim)": ["Rengoku_Theme_Demon_Slayer","rgb(225 150 97)",["Instrumental","Epic","Theme/OST","Japanese","Anime"]],
    "Inosuke Theme V2 - Demon Slayer (Samuel Kim)": ["Inosuke_Theme_V2_Demon_Slayer","rgb(174 139 173)",["Instrumental","Epic","Theme/OST","Japanese","Anime"]],
    "Gurenge (Demon Slayer) - Samuel Kim": ["Gurenge_Demon_Slayer","rgb(35 203 237)",["Instrumental","Epic","Theme/OST","Japanese","Anime"]],
    "Akaza vs Rengoku Theme - Samuel Kim": ["Akaza_theme","rgb(238 170 118)",["Instrumental","Epic","Theme/OST","Japanese","Anime"]],
    "Tokyo Revengers Main Theme - Samuel Kim": ["Tokyo_Revengers_Main_Theme","rgb(248 219 214)",["Instrumental","Epic","Theme/OST","Japanese","Anime"]],
    "The Battle for Me Myself - Tokyo Revengers": ["The_Battle_for_Me_Myself_Tokyo_Revengers","rgb(240 220 214)",["Instrumental","Epic","Theme/OST","Japanese","Anime"]],
    "Our Dream - Tokyo Revengers": ["Our_Dream_Tokyo_Revengers","rgb(240 220 214)",["Instrumental","Theme/OST","Japanese","Anime"]],
    "Call of Silence (Lofi) - Attack on Titan": ["Call_of_Silence_Attack_on_Titan","rgb(119 134 124)",["Instrumental","Theme/OST","Japanese","Anime"]],
    "Quando Corpus Morietur - The K2" : ["Quando_Corpus_Morietur","rgb(27 118 109)",["Instrumental","Korean","Theme/OST"]],
    "My Soul - July": ["My_Soul_July","rgb(210 182 164)",["Instrumental"]],
    "Somewhere - July": ["Somewhere_July","rgb(181 140 128)",["Instrumental"]],
    "Wings of Piano - Deemo": ["Wings_of_Piano","rgb(253 14 79)",["Instrumental"]], 
    "逆时针向 - Asphyxia": ["逆时针向_Asphyxia","rgb(135 224 234)",["Instrumental"]],
    "KOMOREBI - 鲸落版": ["KOMOREBI鲸落版","rgb(10 91 174)",["Instrumental"]],
    "Last Reunion - Peter Roe": ["last_reunion","rgb(3 137 149)",["Instrumental","Epic"]],
    "Sword Art Online - Theme": ["Sword_Art_Online","rgb(47 148 168)",["Instrumental","Epic","Theme/OST"]],
    "Interstellar - Theme": ["interstellar_theme","rgb(255 169 167)",["Instrumental","Epic","Theme/OST"]],
    "Bloody Mary - Instrumental": ["Bloody_Mary_Instrumental","rgb(81 175 197)",["Instrumental","Epic"]],
    "Fake Love Orchestral - BTS": ["Fake_Love_Orchestral_BTS","rgb(194 194 188)",["Instrumental","Epic","Korean","Remix"]],
    "浮光 - Music": ["浮光_Music","rgb(248 143 0)",["Instrumental","Chinese"]],
    "天耀中华 (伴奏) - 徐千雅": ["天耀中华_伴奏_徐千雅","rgb(179 104 83)",["Instrumental","Epic","Chinese"]],
    "黑色裂變 - 大秦帝國": ["黑色裂變_大秦帝國","rgb(88 163 83)",["Instrumental","Epic","Theme/OST","Chinese"]],
    "Grand Ceremony of Qin - Instrumental": ["Grand_Ceremony_Qin","rgb(173 33 63)",["Instrumental","Epic","Theme/OST","Chinese"]],
    "秦汉英雄传 - 片尾曲": ["Qin_Han","rgb(192 164 129)",["Instrumental","Epic","Theme/OST","Chinese"]],
    "琅琊榜 - 主题音乐": ["琅琊榜_主题音乐","rgb(102 204 214)",["Instrumental","Epic","Theme/OST","Chinese"]],
    "中國軍魂 - Music": ["中國軍魂","rgb(39 168 193)",["Instrumental","Epic","Theme/OST","Chinese"]],
    "錦繡山河 - Music":["錦繡山河","rgb(251 92 33)",["Instrumental","Epic","Theme/OST","Chinese"]],
    "White Dew - 羽腫": ["White_dew","rgb(158 181 122)",["Instrumental","Chinese"]],
    "告白の夜 - Music": ["the_reason_why","rgb(27 167 244)",["Instrumental","Japanese"]],
    "最后的审判 - 琅琊榜": ["最后的审判_琅琊榜","rgb(243 230 252)",["Instrumental","Theme/OST","Chinese"]],
    "高進 - 聽著情歌流眼淚": ["聽著情歌流眼淚_高進","rgb(155 80 52)",["Chinese","Pop"]],
    "百鸟归巢 - 谭维维": ["百鸟归巢_谭维维","rgb(138 225 174)",["Chinese"]],
    "天耀中华 - 姚贝娜": ["天耀中华_姚贝娜","rgb(230 124 96)",["Chinese"]],
    "有種 - 流浪地球": ["有種_流浪地球","rgb(69 172 240)",["Chinese","Pop","Theme/OST"]],
    "人是_ - 流浪地球2": ["人是_流浪地球2","rgb(3 191 213)",["Chinese","Pop","Theme/OST"]],
    "璀璨冒险人 - 周深": ["璀璨冒险人","rgb(71 129 137)",["Chinese","Pop","Theme/OST"]],
    "为你而来 - 袁娅维": ["为你而来","rgb(212 161 221)",["Chinese","Theme/OST"]],
    "歷史的天空 - 三國演義": ["歷史的天空_三國演義","rgb(17 155 174)",["Chinese","Theme/OST"]],
    "主題曲 - 大俠霍元甲": ["主題曲_大俠霍元甲","rgb(127 111 146)",["Canto"]],
    "红日 - 李克勤": ["红日_李克勤","rgb(110 203 241)",["Canto","Pop"]],
    "刀劍如夢 - 周華健": ["刀劍如夢_周華健","rgb(157 188 235)",["Chinese"]],
    "神话情话 - 周华健, 齐豫 ": ["神话情话_周华健_齐豫 ","rgb(146 210 250)",["Canto","Pop"]],
    "诉衷情 - 伪装者": ["诉衷情_伪装者","rgb(151 114 80)",["Chinese","Theme/OST"]],
    "等待 - 韩磊": ["等待_韩磊","rgb(237 180 120)",["Chinese","Theme/OST"]],
    "海闊天空 - Beyond": ["海闊天空_Beyond","rgb(237 238 232)",["Canto","Pop"]],
    "一生有意义 - 射雕英雄传之东邪西毒": ["一生有意义_射雕英雄传之东邪西毒","rgb(176 133 66)",["Canto","Theme/OST"]],
    "鐵血丹心 - 射鵰英雄傳": ["鐵血丹心_射鵰英雄傳","rgb(122 128 105)",["Canto","Theme/OST"]],
    "留下我美夢 - TVB 甄妮" : ["留下我美夢_甄妮","rgb(203 165 152)",["Canto","Theme/OST"]],
    "一生所愛 - 大话西游": ["一生所愛_大话西游","rgb(236 194 135)",["Canto","Theme/OST"]],
    "天命最高 - 古天乐 (寻秦记主题曲)": ["天命最高_古天乐","rgb(177 194 150)",["Canto","Theme/OST"]],
    "天下 - 大秦賦": ["天下_大秦賦","rgb(241 187 120)",["Chinese","Theme/OST"]],
    "珍惜 - 李宇春": ["珍惜_李宇春","rgb(155 122 98)",["Chinese","Theme/OST"]],
    "忘川 - 小曲兒 (曲終人未散)": ["忘川_小曲兒","rgb(251 220 214)",["Chinese","Theme/OST"]],
    "终于等到你 - 张靓颖": ["终于等到你_张靓颖","rgb(200 226 205)",["Chinese","Theme/OST"]],
    "绝唱 - 生死谍恋": ["绝唱_生死谍恋","rgb(39 70 109)",["Chinese","Theme/OST"]],
    "假如爱有天意 - 李健": ["假如爱有天意_李健","rgb(247 202 225)",["Chinese","Theme/OST"]],
    "楊花李樹 - 孫楠": ["楊花李樹_孫楠","rgb(179 222 235)",["Chinese","Theme/OST"]],
    "美麗的神話 - 胡歌": ["美麗的神話_胡歌","rgb(167 188 237)",["Chinese","Theme/OST"]],
    "我的血液 - 杨门虎将": ["我的血液_杨门虎将","rgb(169 156 115)",["Chinese","Theme/OST"]],
    "玄鸟 - Till the End of the Moon OST": ["玄鸟_Till_the_End_of_the Moon_OST","rgb(140 145 131)",["Chinese"]],
    "我不存在的世界 - 潘韵淇": ["我不存在的世界","rgb(175 134 134)",["Chinese","Pop"]],
    "我的心下起了雪 - 王忻辰": ["我的心下起了雪_王忻辰","rgb(134 121 184)",["Chinese","Pop"]],
    "櫻花樹下的約定 - 旺仔小喬": ["櫻花樹下的約定_旺仔小喬","rgb(171 145 40)",["Chinese"]],
    "天下 - 張杰": ["天下_張杰","rgb(154 127 110)",["Chinese","Pop"]],
    "起風了 - 買辣椒也用券": ["起風了_買辣椒也用券","rgb(241 164 202)",["Chinese","Pop"]],
    "笼 - 张碧晨": ["笼_张碧晨","rgb(204 206 136)",["Chinese","Pop"]],
    "獨角戲 - 許茹芸": ["許茹芸_獨角戲","rgb(138 209 227)",["Chinese","Pop"]],
    "归途有风 - 王菲": ["归途有风_王菲","rgb(108 217 254)",["Chinese","Theme/OST","Pop"]],
    "飛鳥和蟬 - 任然": ["飛鳥和蟬_任然","rgb(148 200 197)",["Chinese","Pop"]],
    "葬仙 - 葉里 & 苑舍": ["葬仙_葉里_苑舍","rgb(94 223 254)",["Chinese"]],
    "最美的瞬间 - 小阿七": ["最美的瞬间","rgb(244 163 216)",["Chinese","Pop"]],
    "旧梦一场 - 阿悠悠": ["旧梦一场_阿悠悠","rgb(212 91 112)",["Chinese","Pop"]],
    "你能不能不要离开我 - 莫叫语": ["你能不能不要离开我_莫叫语","rgb(202 220 235)",["Chinese","Pop"]],
    "桃花诺 - 邓紫棋": ["桃花诺_邓紫棋","rgb(148 78 169)",["Chinese","Pop","Theme/OST"]],
    "明月天涯 - 五音Jw": ["明月天涯_五音Jw","rgb(187 196 232)",["Chinese","Pop"]],
    "阴霾 - 高旭": ["阴霾_高旭","rgb(131 169 168)",["Chinese","Pop"]],
    "美人魚 - 林俊杰": ["美人魚_林俊杰","rgb(5 44 171)",["Chinese","Pop"]],
    "雲與海 - 阿YueYue": ["雲與海_阿YueYue","rgb(151 196 226)",["Chinese","Pop"]],
    "夏夜灯塔 - 沈以诚": ["夏夜灯塔_沈以诚","rgb(160 156 221)",["Chinese","Pop"]],
    "Heaven - Ailee": ["heaven_ailee","rgb(248 139 193)",["Korean"]],
    "I will show you - Ailee": ["I_will_show_you","rgb(109 218 222)",["Korean"]],
    "Fated to love you - Ailee": ["Fated_to_love_you","rgb(132 215 250)",["Korean"]],
    "Orbit - HWASA": ["Orbit_HWASA","rgb(172 160 122)",["Korean"]],
    "monogram - Lucid Dream": ["monogram_Lucid_Dream","rgb(162 212 183)",["Korean"]],
    "Once Again - Mad Clown & Kim Nayoung": ["Once_Again_Mad_Clown","rgb(79 170 168)",["Korean","Theme/OST"]],
    "Done For Me - Punch Hotel Del Luna OST": ["Done_For_Me","rgb(196 173 221)",["Korean","Theme/OST"]],
    "Fate - Lee Sun Hee": ["Fate","rgb(115 206 231)",["Korean","Theme/OST"]],
    "SBS Temptation of Wife - OST": ["Temptation_of_Wife","rgb(108 192 212)",["Korean","Theme/OST"]],
    "Scars leave beautiful trace - OST": ["Scars_leave_beautiful_trace","rgb(122 197 231)",["Korean","Theme/OST"]],
    "Suddenly - City Hunter": ["Suddenly_City_Hunter","rgb(197 220 85)",["Korean","Theme/OST"]],
    "In The Dark": ["In_The_Dark","rgb(149 150 171)",["Korean","Theme/OST"]],
    "Sigriswil - OST": ["Sigriswil","rgb(55 218 231)",["Korean","Theme/OST"]],
    "See The Light - Lim Hyunsik": ["See_The_Light","rgb(109 129 195)",["Korean","Theme/OST"]],
    "Wa - Lee Jung-hyun": ["Wa","rgb(186 150 165)",["Korean","Theme/OST"]],
    "Kill me Heal me - OST": ["Kill_me_heal_me_OST","rgb(142 182 207)",["Korean","Theme/OST"]],
    "This Love - DAVICHI": ["This_Love_DAVICHI","rgb(121 148 155)",["Korean","Theme/OST"]],
    "Everytime - CHEN & Punch": ["Everytime_CHEN_Punch","rgb(232 228 224)",["Korean","Theme/OST"]],
    "Love Attack - Rescene": ["Love_Attack_Rescene","rgb(176 202 211)",["Korean","Theme/OST"]],
    "Fall In Love Again - TWICE": ["Fall_In_Love_Again_TWICE","rgb(228 146 190)",["Korean"]],
    "Mago - GFRIEND": ["Mago_GFRIEND","rgb(151 151 151)",["Korean","Pop"]],
    "Mise-en-Scène - IZ*ONE": ["Mise_en_Scène_IZ*ONE","rgb(200 240 252)",["Korean","Pop"]],
    "O Sole Mio - IZ*ONE": ["O_Sole_Mio_IZ*ONE","rgb(185 253 252)",["Korean","Pop"]],
    "Island - IZ*ONE": ["Island_IZ*ONE","rgb(240 210 225)",["Korean","Pop"]],
    "해바라기 Hey. Bae. Like It. - IZ*ONE": ["Hey_Bae_Like_It_IZ*ONE","rgb(226 198 246)",["Korean","Pop"]],
    "First Love (첫사랑) - After School": ["First_Love_After_School","rgb(139 175 196)",["Korean","Pop"]],
    "Siren - Sunmi": ["Siren_Sunmi","rgb(221 165 137)",["Korean","Pop"]],
    "Dumhdurum - Apink": ["Dumhdurum_Apink","rgb(239 214 238)",["Korean","Pop"]],
    "Girls - NATURE": ["Girls_NATURE","rgb(163 181 206)",["Korean","Pop"]],
    "Diamond - TRI.BE": ["Diamond_TRIBE","rgb(231 175 85)",["Korean","Pop"]],
    "Start - Dreamcatcher": ["Start","rgb(30 97 225)",["Korean","Pop"]],
    "Rollercoaster - Chungha": ["Rollercoaster_Chungha","rgb(134 128 125)",["Korean","Pop"]],
    "Bon Voyage - YooA": ["Bon_Voyage_YooA","rgb(237 199 167)",["Korean","Pop"]],
    "Virtual Angel - ARTMS": ["Virtual_Angel_ARTMS","rgb(67 128 192)",["Korean","Pop"]],
    "Girls Never Die - tripleS": ["Girls_Never_Die_tripleS","rgb(212 181 175)",["Korean","Pop"]],
    "Paradise - infinite": ["paradise_infinite","rgb(220 145 213)",["Korean","Pop"]],
    "Rooftop - N.Flying": ["Rooftop_NFlying","rgb(246 153 44)",["Korean","Pop"]],
    "beautiful - BEAST": ["beautiful_BEAST","rgb(137 220 251)",["Korean","Pop"]],
    "LUNA - ONEUS": ["LUNA_ONEUS","rgb(86 157 255)",["Korean","Pop"]],
    "Valkyrie (발키리) - ONEUS": ["Valkyrie_ONEUS","rgb(0 149 186)",["Korean","Pop"]],
    "To Be Or Not To Be - ONEUS": ["To_Be_Or_Not_To_Be_ONEUS","rgb(242 225 178)",["Korean","Pop"]],
    "A Song Written Easily - ONEUS": ["A_Song_Written_Easily_ONEUS","rgb(57 193 207)",["Korean","Pop"]],
    "Deja Vu - TOMORROW X TOGETHER":["Deja_Vu_TOMORROW_X_TOGETHER","rgb(204 181 141)",["Korean","Pop"]],
    "LO$ER=LO♡ER - TOMORROW X TOGETHER": ["Loser_Lover_TOMORROW_X_TOGETHER","rgb(146 156 201)",["Korean","Pop"]],
    "Chasing That Feeling - TOMORROW X TOGETHER": ["Chasing_That_Feeling_TOMORROW_X_TOGETHER","rgb(106 128 131)",["Korean","Pop"]],
    "FLASH - X1": ["FLASH_X1","rgb(136 102 134)",["Korean","Pop"]],
    "Fatal Trouble - ENHYPEN": ["Fatal_Trouble_ENHYPEN","rgb(152 221 244)",["Korean","Pop"]],
    "Answer - ATEEZ": ["Answer_ATEEZ","rgb(145 127 192)",["Korean","Pop","ATEEZ"]],
    "Inception - ATEEZ": ["Inception_ATEEZ","rgb(187 159 204)",["Korean","Pop","ATEEZ"]],
    "Say My Name - ATEEZ": ["Say_My_Name_ATEEZ","rgb(170 219 233)",["Korean","Pop","ATEEZ"]],
    "This Is War - MBLAQ": ["This_Is_War_MBLAQ","rgb(116 216 236)",["Korean","Pop"]],
    "Trap - Henry": ["Trap_Henry","rgb(211 165 195)",["Korean","Pop"]],
    "Trap - Henry (CHN)": ["Trap_Henry_CHN","rgb(255 180 178)",["Korean","Pop"]],
    "BLUE - BIGBANG": ["BLUE_Bigbang","rgb(109 179 255)",["Korean","Pop"]],
    "Fiction - BEAST": ["Fiction_BEAST","rgb(90 154 198)",["Korean","Pop"]],
    "Fiction - BEAST (Cover)": ["Fiction_Female","rgb(139 222 221)",["Korean","Pop"]],
    "Hotaru - Fujita Maiko": ["Hotaru_Fujita_Maiko","rgb(225 218 231)",["Japanese","Pop"]],
    "Blue Bird - Naruto": ["Blue_Bird_Naruto","rgb(96 200 235)",["Japanese","Pop","Anime"]],
    "shigure - Music": ["shigure","rgb(170 161 215)",["Japanese","Pop"]],
    "悪魔の子 (Rock Remix) - Attack on Titan": ["悪魔の子_Attack_on_Titan","rgb(167 145 146)",["Japanese","Remix","Pop","Anime"]],
    "夢と葉桜 - 青木月光": ["夢と葉桜","rgb(228 194 220)",["Japanese","Pop"]],
    "さくらひらり - Tomo": ["さくらひらり_Tomo","rgb(243 215 166)",["Japanese","Pop"]],
    "Spirits - KOKIA": ["Spirits_KOKIA","rgb(241 211 108)",["Japanese","Pop"]],
    "When the flowers fall - 桜の花が舞い落ちるとき": ["When_the_flowers_fall","rgb(191 162 195)",["Japanese"]],
    "Calling Out - Sayaka Shionoya": ["Calling_Out","rgb(193 85 131)",["Japanese","Pop"]],
    "Arigatou Aishiteta Hito - Tiara": ["ArigatouAishitetaHito_Tiara","rgb(102 51 204)",["Japanese","Pop"]],
    "The Final Countdown Remix - Europe": ["The_Final_Countdown_Remix_Europe","rgb(192 154 118)",["Remix"]],
    "Bring Me to Life - Evanescence": ["Bring_Me_to_Life_Evanescence","rgb(130 95 170)",["English"]],
    "I'll Do It - Heidi Montag": ["Ill_Do_It_Heidi_Montag","rgb(90 104 114)",["English","Pop"]],
    "Håll Om Mig - Nanne Grönvall":  ["Hall_Om_Mig_Nanne_Gronvall","rgb(216 184 149)",["Swedish","Pop"]],
    "I'm Good (Blue) - Bebe Rexha & David Guetta": ["Im_Good_Bebe_Rexha_David_Guetta","rgb(98 139 226)",["English","Pop"]],
    "DYNASTY x FICTION - Remix": ["DYNASTY_x_FICTION_Remix","rgb(232 178 123)",["Remix","Pop"]],
    "Mimimi - Dramma": ["Mimimi_Dramma","rgb(182 152 132)",["Russian","Pop"]],
    "Beautiful Mess - Kristian Kostov": ["Beautiful_Mess","rgb(140 220 255)",["English"]],
    "Beautiful Mess (China) - Kristian Kostov": ["Beautiful_Mess_China","rgb(63 134 189)",["English"]],
    "DaDaDa (Да да да) - Jarico": ["DaDaDa_Jarico","rgb(120 177 220)",["Russian","Pop"]],
    "Take Me To Church - Hozier (Female Version)": ["Take_Me_To_Church_Hozier_Female","rgb(249 221 174)",["English"]],
    "Around The World (La La La) - ATC": ["Around_The_World_LaLaLa_ATC","rgb(240 173 161)",["English"]],
    "Nevada - Vicetone": ["Nevada_Vicetone","rgb(125 189 241)",["English"]],
    "Why Do I - Bri Tolani and Unknown Brain": ["Why_do_i","rgb(182 227 255)",["English","Pop"]],
    "underwater (sped up) - Nikki Flores": ["underwater","rgb(98 212 244)",["English","Pop","Remix"]],
    "Monody - TheFatRat": ["Monody_TheFatRat","rgb(167 163 165)",["English","Pop"]],
    "Monody - Epic Version": ["Monody_Epic_Version","rgb(147 195 211)",["Instrumental","Epic","Remix"]],
    "We all lie - Sky 캐슬 OST Part 4": ["We_all_lie","rgb(232 182 153)",["Theme/OST"]],
    "Pray - Klang; Angel's Last Mission: Love OST": ["Pray_Klang","rgb(125 203 255)",["Korean","Theme/OST"]],
    "Numb -  Linkin Park (Remix)": ["Numb_Remix","rgb(132 146 148)",["English","Remix","Pop"]],
    "Sold out - Hawk Nelson": ["Sold_out","rgb(86 7 5)",["English","Pop"]],
    "Take Me Hand - Daishi Dance": ["Take_Me_Hand_Daishi_Dance","rgb(232 160 147)",["English","Pop"]],
    "印第安曲 - Music": ["印第安曲","rgb(92 203 254)",["Instrumental"]],
    "迴夢遊仙 - Music": ["迴夢遊仙","rgb(179 191 178)",["Instrumental","Epic"]],
    "That Girl x Talking To The Moon - Remix": ["That_Girl_x_Talking_To_The_Moon","rgb(191 196 217)",["English","Remix"]],
    "Upuan - Jeazell": ["Upuan_Jeazell","rgb(5 50 58)",["Filipino"]],
    "Illusionary Daytime - Alan Walker Style": ["Illusionary_Daytime_Alan_Walker_Style","rgb(75 162 184)",["Remix","Instrumental"]],
    "Don't Cry - Renka": ["Dont_Cry_Renka","rgb(212 115 152)",["Japanese","Pop"]],
    "Sayonara Aishiteta - Saki Kayama": ["Sayonara_Aishiteta","rgb(129 87 229)",["Japanese","Pop"]],
    "殺破狼 - 仙劍奇俠傳電視原聲帶 ": ["殺破狼","rgb(118 16 11)",["Chinese","Theme/OST"]],
    "夜空 - miwa": ["夜空_miwa","rgb(50 17 84)",["Japanese","Pop"]],
    "Sayonara - Kana Nishino": ["Sayonara_Kana_Nishino","rgb(90 63 68)",["Japanese","Pop"]],
    "Hana No Atosaki - Hakuouki": ["Hana_No_Atosaki_Hakuouki","rgb(60 171 214)",["Japanese","Pop"]],
    "Get Over - dream": ["Get_Over_dream","rgb(213 51 149)",["Japanese","Pop"]]

};
console.log("Playlist Length: ", Object.keys(playlist).length); 
let aaa = Object.keys(playlist);
let index = aaa.indexOf("KOMOREBI - 鲸落版");

console.log(index);

let currentSongIndex = 52; 

const audioPlayer = document.getElementById('audioPlayer');
const audioSource = document.getElementById('audioSource');
const albumArt = document.getElementById('albumArt');
const songSelect = document.getElementById('songSelect');
const playPauseButton = document.getElementById('playPauseButton');
const repeatIcon = document.getElementById('repeatButtonIcon');

function populatePlaylist() {
    const container = document.getElementById('container-playlist');
    const dropdown = document.getElementById('songSelect');

    // Clear prev song options
    container.innerHTML = '';
    dropdown.innerHTML = '';

    const filters = [];
    if (document.getElementById('instrumental-filter').checked) filters.push('Instrumental');
    if (document.getElementById('epic-filter').checked) filters.push('Epic');
    if (document.getElementById('remix-filter').checked) filters.push('Remix');
    if (document.getElementById('theme-filter').checked) filters.push('Theme/OST');
    if (document.getElementById('chinese-filter').checked) filters.push('Chinese');
    if (document.getElementById('canto-filter').checked) filters.push('Canto');
    if (document.getElementById('english-filter').checked) filters.push('English');
    if (document.getElementById('jpn-filter').checked) filters.push('Japanese');
    if (document.getElementById('anime-filter').checked) filters.push('Anime');
    if (document.getElementById('korean-filter').checked) filters.push('Korean');
    if (document.getElementById('pop-filter').checked) filters.push('Pop');
    if (document.getElementById('ateez-filter').checked) filters.push('ATEEZ');
    if (document.getElementById('swedish-filter').checked) filters.push('Swedish');
    if (document.getElementById('russian-filter').checked) filters.push('Russian');
    if (document.getElementById('tsfh-filter').checked) filters.push('TSFH');
    if (document.getElementById('filipino-filter').checked) filters.push('Filipino');

    console.log("FILTERS CHOSEN: ", filters);

    let anyMatch = false; 

    for (const title in playlist) {
        if (playlist.hasOwnProperty(title)) {
            const song = playlist[title];
            const songTags = song[2];

            if (filters.every(filter => songTags.includes(filter))) {
                anyMatch = true; 

                const songDiv = document.createElement('div');
                songDiv.classList.add('song-item');
                songDiv.textContent = title;

                // Add click event listener to each song item
                songDiv.addEventListener('click', function() {
                    currentSongIndex = Object.keys(playlist).indexOf(title); // Update the index based on clicked song
                    playSong(title);
                });

                // Append the song item to the playlist container and the dropdown
                container.appendChild(songDiv);
                const option = document.createElement('option');
                option.textContent = title;
                option.value = title;
                dropdown.appendChild(option);

                // Apply color styling after appending the song item
                const currentSongTitle = Object.keys(playlist)[currentSongIndex];
                const songColor = playlist[currentSongTitle][1]; // Get the color associated with the current song
            }
        }
    }
    // no songs match the filters; currentSongIndex to 0
    if (!anyMatch) {
        console.log("no songs match:(");
        
    }
    updateSongColors();
}


function updateSongColors() {
    const songTitles = Object.keys(playlist);
    const currentSongTitle = songTitles[currentSongIndex];
    const songColor = playlist[currentSongTitle][1];

    const filterButtonsHolder = document.getElementById('filterButtonsHolder');
    filterButtonsHolder.style.boxShadow = `-5px 5px 20px ${darkenRGB(playlist[currentSongTitle][1],90)}`;
    filterButtonsHolder.style.background = `linear-gradient(to bottom, rgba(${lightenRGB(playlist[currentSongTitle][1], 20).match(/\d+/g).join(', ')}, 0.6), rgba(${playlist[currentSongTitle][1].match(/\d+/g).join(', ')}, 0.6))`;
    filterButtonsHolder.style.borderImage = `linear-gradient(to bottom, ${lightenRGB(playlist[currentSongTitle][1], 20)}, ${playlist[currentSongTitle][1]})`;
    filterButtonsHolder.style.backgroundClip = 'border-box'; // Clips the gradient to the border area
    filterButtonsHolder.style.padding = '12px'; // Ensure there is space for the border
    filterButtonsHolder.style.border = '1px solid transparent'; // Creates an invisible border for the effect
    const filtergradientBorder = `linear-gradient(to bottom, ${lightenRGB(playlist[currentSongTitle][1], 20)}, ${playlist[currentSongTitle][1]})`;
    filterButtonsHolder.style.boxShadow = `0 0 0 10px ${filtergradientBorder}`;

    const filterButtons = document.querySelectorAll('.filter-button');
    filterButtons.forEach((button) => {
        //button.style.backgroundColor = darkenRGB(playlist[currentSongTitle][1], 30);
        button.style.background = `linear-gradient(to bottom, rgba(${darkenRGB(playlist[currentSongTitle][1], 40).match(/\d+/g).join(', ')}, 0.6), rgba(${playlist[currentSongTitle][1].match(/\d+/g).join(', ')}, 0.6))`;

    });

    


    const artContainer = document.querySelector('.container');
    artContainer.style.background = `linear-gradient(to bottom, rgba(${lightenRGB(songColor, 20).match(/\d+/g).join(', ')}, 0.6), rgba(${songColor.match(/\d+/g).join(', ')}, 0.6))`;

    const siteBody = document.getElementById('siteBody');
    siteBody.style.background = `linear-gradient(to bottom, rgba(${lightenRGB(songColor, 20).match(/\d+/g).join(', ')}, 0.3), rgba(${songColor.match(/\d+/g).join(', ')}, 0.3))`;
    siteBody.style.boxShadow = `-5px 5px 20px ${darkenRGB(songColor, 80)}`;

    const img = document.querySelector('.image');
    img.style.boxShadow = `-5px 5px 10px ${darkenRGB(playlist[currentSongTitle][1],30)}`;
    const imgBorderColor = addOpacity(darkenRGB(playlist[currentSongTitle][1],30),0.5);
    //img.style.borderColor=playlist[currentSongTitle][1];
    img.style.border = `10px solid ${imgBorderColor}`;

    document.body.style.background = `radial-gradient(circle at 27% 25%, ${darkenRGB(playlist[currentSongTitle][1], 50)} 40%, ${darkenRGB(playlist[currentSongTitle][1], 30)} 30%, ${darkenRGB(playlist[currentSongTitle][1], 80)} 30%, ${darkenRGB(playlist[currentSongTitle][1], 30)} 80%) repeat-x`;
    const seekbar = document.getElementById("seekbar");
    const svgProgress = document.getElementById('svgProgress');
    svgProgress.style.stroke = `${lightenRGB(playlist[currentSongTitle][1],70)}`;
    const svgTrack = document.getElementById('svgTrack');
    svgTrack.style.stroke = `${lightenRGB(playlist[currentSongTitle][1],40)}`;

    const songItems = document.querySelectorAll('.song-item');
    songItems.forEach(songItem => {
    // Set the initial background color and box shadow
        songItem.style.backgroundColor = darkenRGB(playlist[currentSongTitle][1],30);
        songItem.style.boxShadow = `-5px 5px 20px ${darkenRGB(playlist[currentSongTitle][1],40)} inset`;
        songItem.style.opacity = '0.8';
        songItem.style.transition = 'background-color 0.3s ease, box-shadow 0.3s ease';

        songItem.addEventListener('mouseover', () => {
            songItem.style.backgroundColor = darkenRGB(playlist[currentSongTitle][1],30);
            songItem.style.fontSize = "16px";
        });
        

        songItem.addEventListener('mouseout', () => {
            songItem.style.backgroundColor = darkenRGB(playlist[currentSongTitle][1],30);
            songItem.style.fontSize = "15px";
            songItem.style.transition="0.3s";
        });
    });

    const containerPlaylist = document.getElementById('container-playlist');
    containerPlaylist.style.boxShadow = `-5px 5px 20px ${darkenRGB(playlist[currentSongTitle][1],90)}`;
    containerPlaylist.style.background = `linear-gradient(to bottom, rgba(${lightenRGB(playlist[currentSongTitle][1], 20).match(/\d+/g).join(', ')}, 0.6), rgba(${playlist[currentSongTitle][1].match(/\d+/g).join(', ')}, 0.6))`;
    containerPlaylist.style.borderImage = `linear-gradient(to bottom, ${lightenRGB(playlist[currentSongTitle][1], 20)}, ${playlist[currentSongTitle][1]})`;
    containerPlaylist.style.backgroundClip = 'border-box'; // Clips the gradient to the border area
    containerPlaylist.style.padding = '12px'; // Ensure there is space for the border
    containerPlaylist.style.border = '1px solid transparent'; // Creates an invisible border for the effect
    const gradientBorder = `linear-gradient(to bottom, ${lightenRGB(playlist[currentSongTitle][1], 20)}, ${playlist[currentSongTitle][1]})`;
    containerPlaylist.style.boxShadow = `0 0 0 10px ${gradientBorder}`;

    filterButtonsHolder.style.boxShadow = `-5px 5px 20px ${darkenRGB(playlist[currentSongTitle][1],90)}`;
    filterButtonsHolder.style.background = `linear-gradient(to bottom, rgba(${lightenRGB(playlist[currentSongTitle][1], 20).match(/\d+/g).join(', ')}, 0.6), rgba(${playlist[currentSongTitle][1].match(/\d+/g).join(', ')}, 0.6))`;
    filterButtonsHolder.style.borderImage = `linear-gradient(to bottom, ${lightenRGB(playlist[currentSongTitle][1], 20)}, ${playlist[currentSongTitle][1]})`;
    filterButtonsHolder.style.backgroundClip = 'border-box'; // Clips the gradient to the border area
    filterButtonsHolder.style.padding = '12px'; // Ensure there is space for the border
    filterButtonsHolder.style.border = '1px solid transparent'; // Creates an invisible border for the effect
    filterButtonsHolder.style.boxShadow = `0 0 0 10px ${filtergradientBorder}`;

    const randSongButton = document.getElementById('randomSongButton');
    randSongButton.style.boxShadow = `-5px 5px 5px ${darkenRGB(playlist[currentSongTitle][1],50)}, 
    2px -2px 1px ${lightenRGB(playlist[currentSongTitle][1],10)},
    3px -2px 5px ${darkenRGB(playlist[currentSongTitle][1],10)} inset`;
    randSongButton.style.backgroundColor = lightenRGB(playlist[currentSongTitle][1],20);
    randSongButton.style.color = darkenRGB(playlist[currentSongTitle][1],60);

    const playStopButton = document.getElementById('playPauseButton');
    playStopButton.style.color = darkenRGB(playlist[currentSongTitle][1],60);
    playStopButton.style.boxShadow= ` 
    3px 3px 5px ${darkenRGB(playlist[currentSongTitle][1],50)} inset,
    -3px 1px 6px ${darkenRGB(playlist[currentSongTitle][1],40)} inset,
    -3px -1px 6px ${darkenRGB(playlist[currentSongTitle][1],40)} inset`;
    playStopButton.style.backgroundColor = lightenRGB(playlist[currentSongTitle][1],10);

    const repeatButton = document.getElementById('repeatButtonIcon');
    repeatButton.style.boxShadow = `-5px 5px 5px ${darkenRGB(playlist[currentSongTitle][1],50)}, 
    2px -2px 1px ${lightenRGB(playlist[currentSongTitle][1],10)},
    3px -2px 5px ${darkenRGB(playlist[currentSongTitle][1],30)} inset`;
    repeatButton.style.backgroundColor = lightenRGB(playlist[currentSongTitle][1],20);
    repeatButton.style.color = darkenRGB(playlist[currentSongTitle][1],40);

    seekbar.style.boxShadow = `-5px 5px 10px ${darkenRGB(playlist[currentSongTitle][1],40)} inset`;
    seekbar.style.borderColor =  lightenRGB(playlist[currentSongTitle][1],10);
    seekbar.style.background = `linear-gradient(to right, white 0%, black var(--seek-value), transparent var(--seek-value), black 100%)`;
    const style = document.createElement('style');
    style.innerHTML = `#seekbar::-webkit-slider-thumb {
    box-shadow: 0 0 0px 7px ${darkenRGB(playlist[currentSongTitle][1],40)};}
    #seekbar::-webkit-slider-thumb:hover{box-shadow: 0 0 0px 7px ${darkenRGB(playlist[currentSongTitle][1],30)};
    }`;
    document.head.appendChild(style);

    const time = document.getElementById('time');
    time.style.color = `${lightenRGB(playlist[currentSongTitle][1],20)}`;
    time.style.opacity = `0.6`;
    time.style.textShadow = `-5px 5px 20px ${darkenRGB(playlist[currentSongTitle][1],90)}`;

    const playlistItems = document.querySelectorAll('.song-item');
    playlistItems.forEach((item) => {
        item.classList.remove('playing'); // Remove bold styling class
        item.textContent = item.textContent.replace(" ←", ""); // Remove previous indicator
    });

    console.log("currsongindex is: ",currentSongIndex);


    

}

// checkboxes for filtering
document.querySelectorAll('.filter-button input').forEach(input => {
    
    input.addEventListener('change', populatePlaylist);
});


populatePlaylist();



function addOpacity(rgbString, opac) {
    if (typeof rgbString !== 'string' || rgbString.trim() === '') {
        console.error("Invalid input: rgbString should be a non-empty string.");
        return;
    }

    if (typeof opac !== 'number' || opac < 0 || opac > 1) {
        console.error("Invalid opacity value: Opacity must be a number between 0 and 1.");
        return;
    }

    const regex = /^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/;
    const match = rgbString.match(regex);

    if (match) {
        let r = parseInt(match[1]);
        let g = parseInt(match[2]);
        let b = parseInt(match[3]);

        return `rgba(${r}, ${g}, ${b}, ${opac})`;
    } else {
        console.error("Invalid rgb format. Ensure the format is rgb(r, g, b).");
        return;
    }
}


function darkenRGB(rgbString, percentage) {
    rgbString = rgbString.replace(/\s+/g, ',');

    const regex = /^rgb\((\d+),(\d+),(\d+)\)$/;
    const match = rgbString.match(regex);
    
    if (match) {
        let r = parseInt(match[1]);
        let g = parseInt(match[2]);
        let b = parseInt(match[3]);
        
        const darken = 1 - (percentage / 100);

        r = Math.max(0, r * darken);
        g = Math.max(0, g * darken);
        b = Math.max(0, b * darken);
        return `rgb(${Math.round(r)}, ${Math.round(g)}, ${Math.round(b)})`;
    }
}

function lightenRGB(rgbString, percentage) {
    rgbString = rgbString.replace(/\s+/g, ',');
    const regex = /^rgb\((\d+),(\d+),(\d+)\)$/;
    const match = rgbString.match(regex);
    if (match) {
        let r = parseInt(match[1]);
        let g = parseInt(match[2]);
        let b = parseInt(match[3]);

        const lighten = percentage / 100;

        r = Math.min(255, r + (255 - r) * lighten);
        g = Math.min(255, g + (255 - g) * lighten);
        b = Math.min(255, b + (255 - b) * lighten);
        
        return `rgb(${Math.round(r)}, ${Math.round(g)}, ${Math.round(b)})`;
    } else {
        throw new Error("Invalid RGB string format");
    }
}


const keys = Object.keys(playlist);
const values = Object.values(playlist);


function displaySongInfo(filename) {
    const songContainer = document.getElementById("song-info"); // Ensure you have an element with id="song-info"

    // Find the key in the playlist where the first element matches the filename
    for (const title in playlist) {
        if (playlist[title][0] === filename) {
            // Split the key into song name and artist
            const [songName, songArtist] = title.split(" - ");

            document.getElementById('selected-song').innerText = `${songName}`;
            document.getElementById('selected-song-artist').innerText=  `${songArtist}`;
            break;
        }
    }
}

function toRGBA(rgbColor, opacity) {
    return rgbColor.replace('rgb', 'rgba').replace(')', `, ${opacity})`);
}

// Function to play the song
function playSong(title) {
    console.log(title);
    const filename = playlist[title][0];
    
    audioSource.src = `music/${filename}.mp3`; 
    albumArt.src = `albumArt/${filename}.png`;
    displaySongInfo(filename);

    audioPlayer.load();  // Load the new song
    audioPlayer.play();  // Play the new song

    // Optionally update any other UI elements if needed
    console.log(`Playing: ${title} (Song Index: ${currentSongIndex})`);
    populatePlaylist(title);

    /*
    // Remove "<--"
    const playlistItems = document.querySelectorAll('.song-item');
    playlistItems.forEach((item) => {
        item.classList.remove('playing'); // Remove bold styling class
        item.textContent = item.textContent.replace(" ←", ""); // Remove previous indicator
    });

    // Add "<--" 
    const currentItem = playlistItems[currentSongIndex];
    currentItem.textContent += " ←";
    console.log("from playsong: ",currentItem.textContent);
    currentItem.classList.add('playing'); 
    */

    songSelect.value = title;
    updatePlayPauseButton();  // Update the play/pause button state


    const songTitles = Object.keys(playlist);
    const currentSongTitle = songTitles[currentSongIndex];

    const filterButtonsHolder = document.getElementById('filterButtonsHolder');
    //filterButtonsHolder.style.background =`linear-gradient(to bottom, rgba(${lightenRGB(playlist[currentSongTitle][1], 20).match(/\d+/g).join(', ')}, 0.6), rgba(${playlist[currentSongTitle][1].match(/\d+/g).join(', ')}, 0.6))`;

    console.log(currentSongTitle, " is at ", currentSongIndex);
    const artContainer = document.querySelector('.container');
    artContainer.style.background = `linear-gradient(to bottom, rgba(${lightenRGB(playlist[currentSongTitle][1], 20).match(/\d+/g).join(', ')}, 0.6), rgba(${playlist[currentSongTitle][1].match(/\d+/g).join(', ')}, 0.6))`;

    const img = document.querySelector('.image');
    img.style.boxShadow = `-5px 5px 20px ${darkenRGB(playlist[currentSongTitle][1],30)}`;
    const imgBorderColor = addOpacity(darkenRGB(playlist[currentSongTitle][1],30),0.5);
    //img.style.borderColor=playlist[currentSongTitle][1];
    img.style.border = `10px solid ${imgBorderColor}`;


    
    
    

    const randSongButton = document.getElementById('randomSongButton');
    randSongButton.style.boxShadow = `-5px 5px 5px ${darkenRGB(playlist[currentSongTitle][1],50)}, 
    2px -2px 1px ${lightenRGB(playlist[currentSongTitle][1],10)},
    3px -2px 5px ${darkenRGB(playlist[currentSongTitle][1],10)} inset`;
    randSongButton.style.backgroundColor = lightenRGB(playlist[currentSongTitle][1],20);
    randSongButton.style.color = darkenRGB(playlist[currentSongTitle][1],60);

    const playStopButton = document.getElementById('playPauseButton');
    playStopButton.style.color = darkenRGB(playlist[currentSongTitle][1],60);
    playStopButton.style.boxShadow= ` 
    3px 3px 5px ${darkenRGB(playlist[currentSongTitle][1],50)} inset,
    -3px 1px 6px ${darkenRGB(playlist[currentSongTitle][1],40)} inset,
    -3px -1px 6px ${darkenRGB(playlist[currentSongTitle][1],40)} inset`;
    playStopButton.style.backgroundColor = lightenRGB(playlist[currentSongTitle][1],10);

    const repeatButton = document.getElementById('repeatButtonIcon');
    repeatButton.style.boxShadow = `-5px 5px 5px ${darkenRGB(playlist[currentSongTitle][1],50)}, 
    2px -2px 1px ${lightenRGB(playlist[currentSongTitle][1],10)},
    3px -2px 5px ${darkenRGB(playlist[currentSongTitle][1],30)} inset`;
    repeatButton.style.backgroundColor = lightenRGB(playlist[currentSongTitle][1],20);
    repeatButton.style.color = darkenRGB(playlist[currentSongTitle][1],40);

    artContainer.style.boxShadow = `-5px 5px 20px ${darkenRGB(playlist[currentSongTitle][1],90)}`;

    const svgProgress = document.getElementById('svgProgress');
    svgProgress.style.stroke = `${lightenRGB(playlist[currentSongTitle][1],70)}`;
    const svgTrack = document.getElementById('svgTrack');
    svgTrack.style.stroke = `${lightenRGB(playlist[currentSongTitle][1],40)}`;

    /* document.body.style.backgroundColor = `${darkenRGB(playlist[currentSongTitle][1],30)}`; */
    document.body.style.background = `radial-gradient(circle at 27% 25%, ${darkenRGB(playlist[currentSongTitle][1], 50)} 40%, ${darkenRGB(playlist[currentSongTitle][1], 30)} 30%, ${darkenRGB(playlist[currentSongTitle][1], 80)} 30%, ${darkenRGB(playlist[currentSongTitle][1], 30)} 80%) repeat-x`;
    const selectedSongArtist = document.getElementById('selected-song-artist');
    selectedSongArtist.style.color = `${lightenRGB(playlist[currentSongTitle][1],80)}`;

    const selectedSong = document.getElementById('selected-song');
    selectedSong.style.color = `${lightenRGB(playlist[currentSongTitle][1],80)}`;
    

    const containerPlaylist = document.getElementById('container-playlist');
    containerPlaylist.style.boxShadow = `-5px 5px 20px ${darkenRGB(playlist[currentSongTitle][1],90)}`;
    containerPlaylist.style.background = `linear-gradient(to bottom, rgba(${lightenRGB(playlist[currentSongTitle][1], 20).match(/\d+/g).join(', ')}, 0.6), rgba(${playlist[currentSongTitle][1].match(/\d+/g).join(', ')}, 0.6))`;
    containerPlaylist.style.borderImage = `linear-gradient(to bottom, ${lightenRGB(playlist[currentSongTitle][1], 20)}, ${playlist[currentSongTitle][1]})`;
    
    containerPlaylist.style.backgroundClip = 'border-box'; // Clips the gradient to the border area
    containerPlaylist.style.padding = '12px'; // Ensure there is space for the border
    containerPlaylist.style.border = '1px solid transparent'; // Creates an invisible border for the effect
    const gradientBorder = `linear-gradient(to bottom, ${lightenRGB(playlist[currentSongTitle][1], 20)}, ${playlist[currentSongTitle][1]})`;
    containerPlaylist.style.boxShadow = `0 0 0 10px ${gradientBorder}`;


    const songItems = document.querySelectorAll('.song-item');

    songItems.forEach(songItem => {
    
    // Set the initial background color and box shadow
        songItem.style.backgroundColor = darkenRGB(playlist[currentSongTitle][1],30);
        songItem.style.boxShadow = `-5px 5px 20px ${darkenRGB(playlist[currentSongTitle][1],40)} inset`;
        songItem.style.opacity = '0.8';
        songItem.style.transition = 'background-color 0.3s ease, box-shadow 0.3s ease';

    // Add hover effect to change background color
        songItem.addEventListener('mouseover', () => {
            songItem.style.backgroundColor = darkenRGB(playlist[currentSongTitle][1],30);
            songItem.style.fontSize = "16px";
        });

        // Revert background color when mouse leaves the element
        songItem.addEventListener('mouseout', () => {
            songItem.style.backgroundColor = darkenRGB(playlist[currentSongTitle][1],30);
            songItem.style.fontSize = "15px";
            songItem.style.transition="0.3s";
        });
    });

    seekbar.style.boxShadow = `-5px 5px 10px ${darkenRGB(playlist[currentSongTitle][1],40)} inset`;
    seekbar.style.borderColor =  lightenRGB(playlist[currentSongTitle][1],10);
    seekbar.style.background = `linear-gradient(to right, white 0%, black var(--seek-value), transparent var(--seek-value), black 100%)`;
    const style = document.createElement('style');
    style.innerHTML = `#seekbar::-webkit-slider-thumb {
    box-shadow: 0 0 0px 7px ${darkenRGB(playlist[currentSongTitle][1],40)};}
    #seekbar::-webkit-slider-thumb:hover{box-shadow: 0 0 0px 7px ${darkenRGB(playlist[currentSongTitle][1],30)};
    }`;
    document.head.appendChild(style);

    const time = document.getElementById('time');
    time.style.color = `${lightenRGB(playlist[currentSongTitle][1],20)}`;
    time.style.opacity = `0.6`;
    time.style.textShadow = `-5px 5px 20px ${darkenRGB(playlist[currentSongTitle][1],90)}`;

    const playing = document.querySelector(".playing");
    //playing.style.color =`${lightenRGB(playlist[currentSongTitle][1],60)}`;

    const filterButtons = document.querySelectorAll('.filter-button');
    filterButtons.forEach((button) => {
        button.style.backgroundColor = darkenRGB(playlist[currentSongTitle][1], 30);
    });



    updateSongColors();


}


// Function to update the play/pause button based on the audio state
function updatePlayPauseButton() {
    const songTitles = Object.keys(playlist);
    const currentSongTitle = songTitles[currentSongIndex];

    const img = document.querySelector('.image');
    const playStopButton = document.getElementById('playPauseButton');
    if (audioPlayer.paused) {
        playPauseButton.innerHTML = '<i class="fa fa-play"></i>';
        img.style.animationPlayState = 'paused'; // Pause the animation
        playStopButton.style.boxShadow= `-5px 5px 5px ${darkenRGB(playlist[currentSongTitle][1],50)}, 
    2px -2px 1px ${lightenRGB(playlist[currentSongTitle][1],10)},
    3px 2px 5px ${darkenRGB(playlist[currentSongTitle][1],20)} inset`;


    } else {
        playPauseButton.innerHTML = '<i class="fa fa-pause"></i>'; // Set pause icon and text
        img.style.animationPlayState = 'running'; 
        playStopButton.style.boxShadow= ` 
    3px 3px 5px ${darkenRGB(playlist[currentSongTitle][1],50)} inset,
    -3px 1px 6px ${darkenRGB(playlist[currentSongTitle][1],40)} inset,
    -3px -1px 6px ${darkenRGB(playlist[currentSongTitle][1],40)} inset`;
    }
}

// Function to toggle play/pause when the button is clicked
function togglePlayPause() {
    if (audioPlayer.paused) {
        audioPlayer.play();
    } else {
        audioPlayer.pause();
    }
    updatePlayPauseButton();
}

// Function to play the next song in the playlist
const repeatCheckbox = document.getElementById('repeat-button');

function playNextSong() {
    if (repeatCheckbox.checked){
        const titles = Object.keys(playlist);
        playSong(titles[currentSongIndex]);
        
    }
    else{
        const titles = Object.keys(playlist);
        currentSongIndex = (currentSongIndex + 1) % titles.length;  // Increment index and wrap around if at the end
        playSong(titles[currentSongIndex]);  // Play the next song

    }
    
}

repeatCheckbox.addEventListener("change", function(){
    const repeatButton = document.getElementById('repeatButtonIcon');
    const songTitles = Object.keys(playlist);
    const currentSongTitle = songTitles[currentSongIndex];

    if (repeatCheckbox.checked){
        repeatIcon.innerHTML = '<i class="fa fa-remove"></i>';

        repeatButton.style.boxShadow= `-5px 5px 5px ${darkenRGB(playlist[currentSongTitle][1],50)}, 
    2px -2px 1px ${lightenRGB(playlist[currentSongTitle][1],10)},
    3px 2px 5px ${darkenRGB(playlist[currentSongTitle][1],20)} inset`;
        
        console.log("repeat button is checked");
    }
    else{
        repeatIcon.innerHTML = '<i class="fa fa-refresh"></i>';
        repeatButton.style.boxShadow= ` 
    3px 3px 5px ${darkenRGB(playlist[currentSongTitle][1],50)} inset,
    -3px 1px 6px ${darkenRGB(playlist[currentSongTitle][1],40)} inset,
    -3px -1px 6px ${darkenRGB(playlist[currentSongTitle][1],40)} inset`;
    }
});


repeatIcon.addEventListener("click", () => {
    repeatCheckbox.checked = !repeatCheckbox.checked; // Toggle checkbox state
    repeatCheckbox.dispatchEvent(new Event("change")); // Trigger 'change' event for synchronization
    });



function getIndexPlaylist(index){
    const keyatindex = keys[index];
    return keyatindex;
}


function playRandomSong(){
    console.log("rand button clicked");
    const randomSongIndex = Math.floor(Math.random() * Object.keys(playlist).length);
    console.log(randomSongIndex);
    const randomTitle = getIndexPlaylist(randomSongIndex);
    console.log(randomTitle);
    currentSongIndex = randomSongIndex;
    playSong(randomTitle);
}

randomSongButton.addEventListener('click',playRandomSong);

audioPlayer.addEventListener('ended', playNextSong);

// Event listener for the play/pause button
playPauseButton.addEventListener('click', togglePlayPause);

// Event listener for dropdown song change
songSelect.addEventListener('change', function() {
    const selectedTitle = songSelect.value;
    currentSongIndex = Object.keys(playlist).indexOf(selectedTitle);  // Update index based on selection
    playSong(selectedTitle);  
    console.log("currsongindex is changed to ",currentSongIndex);
});


populatePlaylist();
updatePlayPauseButton();


const audio = document.getElementById("audioPlayer");
const seekbar = document.getElementById("seekbar");

// Update the progress bar as the audio plays
audio.addEventListener("timeupdate", function() {
    const progress = (audio.currentTime / audio.duration) * 100;
    seekbar.value = progress;
});

seekbar.addEventListener("input", function() {
    const seekTo = (seekbar.value / 100) * audio.duration; 
    audio.currentTime = seekTo; 
});

function updateSeekBarBackground() {
    const value = (seekbar.value / seekbar.max) * 100; 
    seekbar.style.setProperty("--seek-value", `${value}%`);
    setProgress(value);
}
    
audio.addEventListener("timeupdate", function () {
    const progress = (audio.currentTime / audio.duration) * 100; // Calculate percentage
    seekbar.value = progress; // Update the seekbar position
    updateSeekBarBackground();
});
    
seekbar.addEventListener("input", function () {
        const time = (seekbar.value / 100) * audio.duration; // Map slider value to audio time
        audio.currentTime = time;
        updateSeekBarBackground();
});

let progressCircle = document.querySelector(".progress");
let radius = progressCircle.r.baseVal.value;
let circumference = (radius * 2 * Math.PI)/2;
progressCircle.style.strokeDasharray = circumference;

    
function setProgress(percent) {
    progressCircle.style.strokeDashoffset = circumference+ (percent / 100) * circumference; 
}
        
changeProgress();
function changeProgress() {
    let progresstime = 100;
    setProgress(progresstime);
    
    for (let i = 100; i >= 0; i--) {
        setTimeout(() => {
            progresstime = i;
            setProgress(progresstime);
        }, i * 10); // Each increment happens every 1 second
    }
}
